# 02. 디렉터리와 파일 사용법

- **리눅스의 파일과 디렉터리**
    - **파일의 종류**
        - 파일
            - 관련 있는 정보들의 집합
            - 리눅스는 파일을 효과적으로 관리하기 위해 디렉터리를 사용
            - 파일 시스템 : 디렉터리와 파일로 구성된 전체 집합
            - 리눅스에서 파일은 사용 목적에 따라 일반 파일, 디렉터리, 심볼릭 링크, 장치 파일로 구분
        - 일반 파일
            - 데이터를 저장하는 데 주로 사용
            - 리눅스에서 사용하는 대부분의 파일은 일반 파일에 해당
            - 바이너리 파일 : 실행 파일이나 이미지 파일의 경우 바이너리 형태로 데이터가 저장되어 사용
        - 디렉터리
            - 리눅스에서는 디렉터리도 파일로 취급
            - 디렉터리 파일에는 해당 디렉터리에 저장된 파일이나 하위 디렉터리에 대한 정보가 저장
        - 심볼릭 링크
            - 원본 파일을 대신하여 다른 이름으로 파일명을 지정한 것 (윈도우의 ‘바로가기’와 유사)
        - 장치 파일
            - 리눅스 시스템에서 부착된 장치들을 관리하기 위한 특수 파일
            ex) 하드 디스크나 키보드 같은 각종 장치
        
    - **디렉터리의 계층 구조**
        - 트리 구조
            - 리눅스에서 파일을 효율적으로 관리하기 위해 리렉터리를 계층적으로 구성
            - 모든 디렉터리의 출발점은 **root 디렉터리**이며, `‘/’`으로 표시
            
                ![Untitled](https://github.com/eeeeeddy/Coding_Test_Practice/assets/71869717/d64ab80b-0e6b-4cc0-b92e-f643e8fc70ff)
            
        - 리텍터리의 주요 기능
            
            이름의 끝에 붙은 /는 해당 파일이 디렉터리임을, @는 심볼릭 링크를 의미
            
            | 디렉터리 | 기능 |
            | --- | --- |
            | dev | 장치 파일이 담긴 디렉터리 |
            | home | 사용자 홈 디렉터리가 생성되는 디렉터리 |
            | media | DVD/CD나 USB 같은 외부 장치를 연결(마운트)하는 디렉터리 |
            | opt | 추가 패키지가 설치되는 디렉터리 |
            | root | root 계정의  |
            | sys | 리눅스 커널과 관련된 파일이 있는 디렉터리 |
            | usr | 기본 실행 파일과 라이브러리 파일, 헤더 파일 등 많은 파일이 있다. <br> 참고로 usr는 ‘Unix System Resource’의 약자 |
            | boot | 부팅에 필요한 커널 파일을 가지고 있다. |
            | etc | 리눅스 설정을 위한 각종 파일을 가지고 있다. |
            | lost+found | 파일 시스템에 문제가 발생하여 복구할 경우, 문제가 되는 파일이 저장되는 디렉터리로 보통은 비어있다. |
            | mnt | 파일 시스템을 임시로 마운트하는 디렉터리 |
            | proc | 프로세스 정보 등 커널 관련 정보가 저장되는 디렉터리 |
            | run | 실행 중인 서비스와 관련된 파일이 저장 |
            | srv | FTP나 Web 등 시스템에서 제공하는 서비스의 데이터가 저장 |
            | tmp | 시스템 사용 중에 발생하는 임시 데이터가 저장. 이 디렉터리에 있는 파일은 재시작하면 모두 삭제된다. |
            | var | 시스템 운영 중에 발생하는 데이터나 로그 등 내용이 자주 바뀌는 파일이 주로 저장 |
            - 추가
                - bin : 실행 파일
                - lib : 프로그램을 실행하기 위한 라이브러리가 있음
                - conf : 환경 설정 파일 <br><br>
            
    - **절대 경로명과 상대 경로명**
        - 절대 경로 : 항상 루트(/) 디렉터리부터 시작
        - 상대 경로 : 현재 디렉터리를 기준으로 시작
        
        | 구분 | 특징 |
        | --- | --- |
        | 상대 경로 | - 반드시 /로 시작 <br> - 루트 디렉터리부터 시작하여 특정 파일이나 디렉터리의 위치에 이르기까지 중간에 있는 모든 디렉터리의 이름을 표시 <br> - 특정 위치를 가리키는 절대 경로명은 항상 동일 |
        | 절대 경로 | - / 이외의 문자로 시작 <br> - 현재 디렉터리를 기준으로 서브 디렉터리로 내려가면 그냥 서브 디렉터리명으로 시작 <br> - 현재 디렉터리를 기준으로 상위 디렉터리로 가려면 ..(마침표 두 개)로 시작 <br> - 상대 경로명은 현재 디렉터리가 어디냐에 따라 달라진다. |
        
    - **파일과 디렉터리 이름의 규칙**
        - 파일과 디렉터리 이름을 정하는 규칙과 예
            
            | | |
            | --- | --- |
            | 규칙 | / 사용할 수 없다. /는 경로명에서 구분자로 사용하기 때문 |
            |  | 알파벳, 숫자, 하이픈, 언더스코어, 마침표만 사용 |
            |  | 공백 문자, *, |, “, ‘, @, #, $, %, ^, & 등을 사용하면 안 된다. |
            |  | 영문은 대문자와 소문자를 구별 |
            |  | .(마침표)로 시작하면 숨김 파일로 간주 |
            | 예 | 좋은 이름 예시 : game.txt, hello.c, test, sample11 |
            |  | 나쁜 이름 예시 : &game, *dir, my home, game\ |
            |  | 사용할 수 없는 이름 예시 : myhome/, /test, bad/name |
            
- **디렉터리 관련 명령**
    - **현재 디렉터리 확인 :** `pwd`
        - 현재 디렉터리의 위치 확인. (현재 디렉터리의 절대 경로 출력)
    
    - **디렉터리 이동 :** `cd [디렉터리]`
        - 지정한 디렉터리로 이동
        - 홈 디렉터리 이동 방법
            - `cd /home/user1`
                
                절대 경로명을 사용하여 홈 디렉터리로 이동
                
            - `cd ../../home/user1`
                
                현재 `usr/lib` 디렉터리에 있다고 가정하면 이를 기준으로 상대 경로명을 사용하여 홈 디렉터리로 이동
                
            - `Cd ~`
                
                홈 디렉터리를 나타내는 기호인 `~`를 사용하여 홈 디렉터리로 이동 
                
            - `Cd`
                
                목적지를 지정하지 않고 cd 명령만 사용하면 해당 계정의 홈 디렉터리로 이동
                
        
    - **디렉터리 내용 확인 :** `ls`, `dir`, `vdir`
        - 디렉터리에 있는 파일이나 서브 디렉터리 등 디렉터리의 내용을 보는 명령
            - 형식 : `ls [옵션] [디렉터리(파일)]`
                
                **(**`dir`, `vdir`은 `ls`와 비슷함)
                
            - 옵션
                - `-a` : 숨김 파일을 포함하여 모든 파일의 목록을 출력
                - `-d` : 디렉터리 자체의 정보를 출력
                - `-i` : 첫 번째 행에 inode 번호를 출력
                - `-l` : 파일의 상세 정보를 출력
                    
                    ```bash
                    [user1@localhost ~]$ ls -l
                    합계 0
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 공개
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 다운로드
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 문서
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 바탕화면
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 비디오
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 사진
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 서식
                    drwxr-xr-x. 2 user1 user1  6 10월 27 21:11 음악
                    [user1@localhost ~]$
                    ```
                    
                    | 필드 번호 | 필드 값 | 의미 |
                    | --- | --- | --- |
                    | 1 | d | 다음과 같은 파일 종류를 나타낸다. <br> - : 일반(정규) 파일 <br> d : 디렉터리 파일 <br> l : 심볼릭 링크 파일 <br> b : 블록 단위로 읽고 쓰는 블록 장치 파일 <br> c : 섹터 단위로 읽고 쓰는 문자 장치 파일 <br> p : 파이프 파일(프로세스 간 통신에 사용되는 특수 파일) <br> s : 소켓(네트워크 통신에 사용되는 특수 파일) |
                    | 2 | rwxr-xr-x | 파일 접근 권한, 파일의 소유자, 그룹, 기타 사용자가 읽고 수정하고 실행할 수 있는 권한이 어떻게 부여되어 있는지를 보여줌 |
                    | 3 | 2 | 하드 링크의 개수 |
                    | 4 | user1 | 파일 소유자 |
                    | 5 | user1 | 파일이 속한 그룹 |
                    | 6 | 6 | 파일 크기(바이트 단위) |
                    | 7 | 10월 27 21:11 | 파일이 마지막으로 수정된 시간 |
                    | 8 | 공개 | 파일명 |
                - `-A` : . (마침표)와 .. (마침표 두 개)를 제외한 모든 파일 목록을 출력
                - `-F` : 파일의 종류를 표시(* : 실행파일, / : 디렉터리, @ : 심볼릭 링크)
                - `-L` : 심볼릭 링크 파일의 경우 원본 파일의 정보를 출력
                - `-R` : 하위 디렉터리의 목록까지 출력
    
    - **디렉터리 생성 · 삭제 :** `mkdir`, `rmdir`
        - 생성
            - 형식 : `mkdir [옵션] [디렉터리] [디렉터리] [디렉터리]..`
                
                공백을 구분자로 생성자를 여러 개 지정하면 동시에 디렉터리 생성이 가능하다. 
                
            - 옵션
                - `-p` : 하위 디렉터리를 계층적으로 생성할 때 중간 단계의 디렉터리가 없으면 자동으로 중간 단계의 디렉터리를 생성하고 지정한 디렉터리를 생성
        - 삭제
            - 형식 : `rmdir [옵션] [디렉터리]`
                
                디렉터리가 비어있지 않다면 삭제 불가
                
            - 옵션
                - `-p` : 지정한 디렉터리를 삭제하고, 그 디렉터리의 부모 디렉터리가 빈 디렉터리일 경우 부모 디렉터리도 자동으로 삭제

- **파일 관련 명령**
    - **파일 내용 출력 :** `cat`, `more`, `less`, `tail`
        - 파일 내용 연속으로 출력 : `cat`
            - 형식 : `cat [옵션] [파일]`
            - 옵션
                - `-n` : 행 번호를 붙여서 출력
        - 화면 단위로 파일 내용 출력하기 : `more`
            - 형식 : `more [옵션] [파일]`
            - 옵션
                - `+ 행 번호` : 출력을 시작할 행 번호를 지정
            - 파일 내용이 출력된 상태에서 다음 명령어를 통해 조작이 가능하다.
                - space bar : 다음 화면 출력
                - enter : 한 줄씩 스크롤
                - `/문자열` : 해당 문자열 검색
                - `q` : 종료
        - 파일 내용을 화면 단위로 출력 : `less`
            - 형식 : `less [파일]`
            - 키와 동작
                
                
                | 키 | 동작 |
                | --- | --- |
                | j | 한 행 씩 다음 행으로 스크롤 |
                | k | 한 행 씩 이전 행으로 스크롤 |
                | space bar, Ctrl+f | 다음 화면으로 이동 |
                | Ctrl + b | 이전 화면으로 이동 |
        - 파일 내용의 뒷 부분 출력 : `tail`
            - 형식 : `tail [옵션] [파일]`
            - 옵션
                - `+행 번호` : 지정한 행부터 끝까지 출력
                - `-숫자` : 화면에 출력할 행의 수를 지정 (기본 값은 10)
                - `-f` : 파일 출력을 종료하지 않고 주기적으로 계속 반복 출력
                    - 이때, 명령이 무한히 반복되기 때문에 `Ctrl`+`c`로 명령을 종료해야함
        
    - **파일(디렉터리) 복사 · 이동 · 삭제 :** `cp`, `mv`, `rm`
        - 복사
            - 형식 : `cp [옵션] [파일1(디렉터리1)] [파일2(디렉터리2)]`
            - 옵션
                - `-i` : 파일2가 이미 존재하면 덮어쓸 것인지 물어본다. (`y/n`으로 선택)
                - `-r` : 디렉터리를 복사할 때 지정
            - 두 번째 인자가 디렉터리인 경우
                - 파일을 해당 디렉터리 아래에 복사
                - 쓰기 권한이 없는 디렉터리에 파일을 복사할 경우 오류가 발생
            - 인자를 여러 개 지정할 경우
                - 첫 번째 인자의 자리에 파일명 여러 개 지정 가능
                - 마지막 인자는 반드시 디렉터리여야 함
                - 마지막에 지정한 디렉터리로 앞서 지정한 파일들이 모두 복사됨
        - 이동 (이동하거나 이름을 바꾼다)
            - 형식 : `mv [옵션] [파일1(디렉터리1)] [파일2(디렉터리2)]`
            - 옵션
                - `-i` : 파일2(디렉터리2)가 존재하면 덮어쓸 것인지 물어본다.
            - 두 번째 인자에 디렉터리와 파일명을 함께 지정할 경우 파일이 지정한 디렉터리로 이동하면 파일명도 바뀜
            - 쓰기 권한이 없는 디렉터리로 파일을 이동할 경우 오류 발생
            - 첫 번째 인자에 파일을 여러 개 지정하여 여러 파일을 이동시킬 수 있으며 마지막 인자는 반드시 디렉터리여야 함
            - 인자가 모두 디렉터리일 때 두 번째 인자가 기존에 있던 디렉터리가 아닐 경우에는 디렉터리 명이 변경
        - 삭제
            - 형식 : `rm [옵션] [파일 또는 디렉터리]`
            - 옵션
                - `-i` : 파일을 정말 삭제할 것인지 확인
                - `-r` : 디렉터리를 삭제할 때 지정
            - 삭제할 파일을 인자로 지정하면 해당 파일이 삭제
            - 바로 삭제되어 복구가 불가능하기 때문에 신중해야함
        
    - **하드 링크 · 심볼릭 링크 생성 :** `ln`
        - 파일 링크 : 기존에 있는 파일에 새로운 파일명을 붙이는 것
        - 하드 링크 : 기존 파일에 새로운 파일명을 추가로 생성
            - 형식 : `ln [옵션] [원본 파일] [링크 파일]`
            - 옵션
                - `-s` : 심볼릭 링크 파일을 생성
        - 심볼릭 링크 : 원본 파일을 가리키는 새로운 파일을 생성
            - 원본 파일과 심볼릭 링크 파일은 inode 번호가 다른 별개의 파일
        
        - 리눅스 파일의 구성
            
            ![Untitled 1](https://github.com/eeeeeddy/Coding_Test_Practice/assets/71869717/4c6e6f03-ae5d-4121-9b6a-05c7e8832d85)
            
            - 파일 = 파일명 + inode + 데이터 블록
                - 파일명 : 사용자가 파일에 접근할 때 사용하는 파일의 이름
                - inode : 파일에 대한 정보를 가진 특별한 구조체. 외부적으로는 번호로 표시, 내부적으로는 파일의 종류 및 크기, 소유자, 파일 변경 시간, 파일명 등 파일 상세 정보와 데이터 블록의 주소를 저장. `ls -i` 명령으로 확인이 가능하며, inode 번호가 같다면 같은 파일
    
    - **빈 파일 생성 :** `touch`
        - 형식 : `touch [-acm] [-r ref_file | -t time] [파일]`
        - 옵션
            - `-a` : 접근 시간만 변경
            - `-m` : 수정 시간만 변경
            - `-t` : [[CC]YY]MMDDhhmm[.ss]: 시간을 직접 입력
                - CC : 연도의 첫 두 자리
                - YY : 연도의 마지막 두 자리
        - 이미 있는 파일에 대해 `touch` 명령을 옵션 없이 사용하면 파일의 수정 시간이 현재 시간으로 변경됨
    
    - **파일 내용 검색 :** `grep`
        - 지정한 패턴이 포함된 행을 찾는다.
        - 형식 : `grep [옵션] [패턴] [파일]`
        - 옵션
            - `-i` : 대문자 · 소문자를 모두 검색
            - `-l` : 지정한 패턴이 포함된 파일명을 출력
            - `-n` : 행 번호를 출력
    
    - **파일 검색 :** `find`, `whereis`, `which`
        - 지정한 위치에서 검색 조건에 맞는 파일을 찾음 : `find`
            - 형식 : `find [경로] [검색 조건] [동작]`
            - 검색 조건
                - `-name filename` : 파일명으로 검색
                - `-type 파일 종류` : 파일 종류로 검색
                - `-user loginID` : 지정한 사용자가 소유한 모든 파일을 검색
                - `-perm 접근 권한` : 지정한 사용 권한과 일치하는 파일을 검색
            - 동작
                - `-exec 명령 {} \;` : 검색된 파일에 명령을 실행
                - `-ok 명령 {} \;` : 사용자의 확인을 받아서 명령을 실행
                - `-print` : 검색된 파일의 절대 경로명을 화면에 출력 (기본 동작)
                - `-ls` : 검색 결과를 긴 목록 형식으로 출력
        - 지정된 경로에서 명령의 바이너리 파일이나 매뉴얼 파일의 위치를 찾음 : `whereis`
            - 형식 : `whereis [옵션] [파일]`
            - 옵션
                - `-b` : 바이너리 파일만 검색
                - `-m` : 매뉴얼 파일만 검색
                - `-s` : 소스 파일만 검색
            - 환경 변수 `$PATH`나 `$MANPATH`에 지정된 디렉터리를 검색하여 파일의 위치를 찾음
        - 명령 파일의 위치를 찾아서 그 경로나 앨리어스를 출력 : `which`
            - 형식 : `which [명령]`
            - 파일을 찾으면 절대 경로를 출력하고 바로 종료
            - 최대 하나의 경로만을 출력하며 이 경로는 우리가 명령을 입력할 때 실행되는 파일